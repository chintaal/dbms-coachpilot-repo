#!/bin/sh
# Block commits with files > 50MB
max=50000000
fail=0
for f in $(git diff --cached --name-only); do
  [ -f "$f" ] || continue
  size=$(wc -c < "$f" | tr -d ' ')
  if [ "$size" -gt "$max" ]; then
    echo "âŒ File too large (>50MB): $f ($size bytes)"
    fail=1
  fi
done
[ "$fail" -eq 1 ] && exit 1
exit 0
